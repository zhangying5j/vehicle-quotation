webpackJsonp([10],{BTrg:function(t,e){},DeW3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),o=a("NYxO"),r={name:"index",components:{BaseTable:function(){return a.e(83).then(a.bind(null,"ss0d"))}},data:function(){return{activeName:"select",activeChartName:"select",params:{scene:"",secondOrg:"",thirdOrg:"",channel:"",carFlag:""},thirdOrgList:[],rules:{},columnShowList:[],indexShow:!1,detailShow:!1,chartShow:!1,currentDimCode:[],currentIndexCode:[],dimColumn:[],indexColumn:[],diaColumns:[{label:"保单号码",prop:"policyNo",width:250},{label:"险类代码",prop:"classCode",width:120},{label:"险种代码",prop:"riskCode",width:120},{label:"投保人代码",prop:"appliCode",width:140},{label:"总保险价值",prop:"sumValue",width:120},{label:"总保险金额",prop:"sumAmount",width:120},{label:"总折扣金额",prop:"sumDiscount",width:120},{label:"总保险费",prop:"sumPremium",width:120},{label:"总附加险保费",prop:"sumSubPrem",width:120},{label:"保单生成日期",prop:"underwriteEndDate",width:120},{label:"起保日期（启运日期）",prop:"startDate",width:120},{label:"起保小时",prop:"startHour",width:120},{label:"终保日期",prop:"endDate",width:120},{label:"终保小时",prop:"endHour",width:120},{label:"自动稽核标志",prop:"renewalFlag",width:120},{label:"业务来源代码",prop:"businessNature",width:120}],chartDimList:[],chartIndexList:[],chartDimData:[],chartIndexData:[]}},created:function(){this.$store.dispatch("initFormData")},computed:n()({currentDimList:function(){var t=this;return this.currentDimCode.map(function(e){return t.formData.dimList.find(function(t){return t.code===e})})},currentIndexList:function(){var t=this;return this.currentIndexCode.map(function(e){return t.formData.indexList.find(function(t){return t.code===e})})},columns:function(){var t=[];return(this.dimColumn.length>0||this.indexColumn>0)&&(t.push({prop:"operation",width:120,label:"数据钻取",operation:!0,operations:[{text:"详情",event:"detail"}]}),t.push({prop:"secondOrg",width:120,label:"二级机构"}),t.push({prop:"thirdOrg",width:120,label:"三级机构"})),t.concat(this.dimColumn).concat(this.indexColumn)},tempList:function(){var t=[],e=this.chartDimData;return this.chartIndexData.forEach(function(a){var i=[];a.data.forEach(function(t,a){i.push({value:t,name:e[a]})}),t.push({id:a.code,options:[{type:"柱状图",option:{title:{text:"柱状图"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:a.name},grid:{left:"5%",right:"5%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:e}],yAxis:[{type:"value"}],series:[{name:a.name,type:"bar",barWidth:20,data:a.data}]}},{type:"折线图",option:{title:{text:"折线图"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:a.name},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:e}],yAxis:[{type:"value"}],series:[{name:a.name,type:"line",data:a.data}]}},{type:"面积图",option:{title:{text:"面积图"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:a.name},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:e}],yAxis:[{type:"value"}],series:[{name:a.name,type:"line",areaStyle:{normal:{}},data:a.data}]}},{type:"条形图",option:{title:{text:"条形图"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:a.name},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"value"}],yAxis:[{type:"category",axisTick:{show:!1},data:e}],series:[{name:a.name,type:"bar",label:{normal:{show:!0,position:"inside"}},data:a.data}]}},{type:"饼状图",option:{title:{text:a.name,subtext:"饼状图",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:10,left:"center",data:e},series:[{type:"pie",radius:"65%",center:["50%","50%"],selectedMode:"single",data:i,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},{type:"6",option:{title:{text:"散点图"},xAxis:{},yAxis:{},series:[{symbolSize:20,data:[[10,8.04],[8,6.95],[13,7.58],[9,8.81],[11,8.33],[14,9.96],[6,7.24],[4,4.26],[12,10.84],[7,4.82],[5,5.68]],type:"scatter"}]}},{type:"7",option:{title:{text:"雷达图"},tooltip:{},legend:{data:["满期赔付率","合并终极赔付率"]},radar:{name:{textStyle:{color:"#fff",backgroundColor:"#999",borderRadius:3,padding:[3,5]}},indicator:[{name:"家庭自用",max:100},{name:"营业出租租赁",max:100},{name:"营业旅游",max:100},{name:"营业货车",max:100},{name:"非营业机关",max:100},{name:"非营业企业",max:100}]},series:[{name:"满期赔付率 vs 合并终极赔付率",type:"radar",data:[{value:[87.11,78.36,72.36,78.23,69.32,70.32],name:"满期赔付率"},{value:[86.12,77.66,71.25,77.35,68.21,69.36],name:"合并终极赔付率"}]}]}}]})}),t}},Object(o.c)({formData:function(t){return t.chart.formData},tableData:function(t){return t.chart.tableData},detailData:function(t){return t.chart.detailData}})),watch:{currentDimList:function(t){var e=this;this.dimColumn=[],t.forEach(function(t){e.dimColumn.push({prop:t.code,label:t.name,width:t.width})})},currentIndexList:function(t){var e=this;this.indexColumn=[],t.forEach(function(t){e.indexColumn.push({prop:t.code,label:t.name,width:t.width})})},tempList:function(t){if(t.length>0){var e=this;setTimeout(function(){t.forEach(function(t){e.drawLine(t.id,t.options[0].option)})},200)}}},methods:{getThridOrg:function(t){var e=this.formData.orgList.find(function(e){return e.code===t});this.thirdOrgList=e.children},query:function(){this.$store.dispatch("getTabData")},dimChange:function(t){this.currentDimCode=t},addIndex:function(t){this.currentIndexCode.includes(t)||this.currentIndexCode.push(t)},removeIndex:function(t){this.currentIndexCode.splice(this.currentIndexCode.indexOf(t),1)},detail:function(){this.$store.dispatch("detailData",this.params),this.detailShow=!0},chartDimChange:function(t){var e=this;this.chartDimData=[],t.forEach(function(t){e.tableData.forEach(function(a){return e.chartDimData.push(a[t])})})},chartIndexChange:function(t){var e=this;this.chartIndexData=[],t.forEach(function(t){var a=[],i=e.currentIndexList.find(function(e){return e.code===t});e.tableData.forEach(function(e){return a.push(e[t])}),e.chartIndexData.push({code:t,name:i.name,data:a})})},drawLine:function(t,e){console.log(t),console.log(this.chartDimData),console.log(this.chartIndexData),console.log(e),console.log("=====start====="),console.log(document.getElementById(t));var a=this.$echarts.init(document.getElementById(t));a.clear(),a.setOption(e),console.log("=======end=====")}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"form"},[a("el-form",{ref:"queryForm",attrs:{"label-width":"180px",model:t.params,rules:t.rules,inline:!0}},[a("el-form-item",{attrs:{label:"业务场景选择",prop:"scene"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.scene,callback:function(e){t.$set(t.params,"scene",e)},expression:"params.scene"}},[a("el-option",{attrs:{value:"车险保单分析",label:"车险保单分析"}}),t._v(" "),a("el-option",{attrs:{value:"车险定价宽表分析",label:"车险定价宽表分析"}})],1)],1)],1)],1),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:t.params.scene,name:"select"}},[a("div",{staticClass:"sector-list"},[a("div",{staticClass:"title"},[t._v("选择维度")]),t._v(" "),a("div",{staticClass:"biz-sector"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{"label-width":"120px",inline:!0}},[a("el-form-item",[a("el-checkbox-group",{on:{change:t.dimChange},model:{value:t.columnShowList,callback:function(e){t.columnShowList=e},expression:"columnShowList"}},t._l(t.formData.dimList,function(e){return a("el-checkbox",{key:e.code,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],1)],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"sector-list"},[a("div",{staticClass:"title"},[t._v("选择指标")]),t._v(" "),a("div",{staticClass:"biz-sector"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"tag"},[t._l(t.currentIndexList,function(e){return a("el-tag",{key:e.code,attrs:{closable:"",type:"primary"},on:{close:function(a){t.removeIndex(e.code)}}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])}),t._v(" "),a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-plus"},on:{click:function(e){t.indexShow=!0}}},[t._v("新增指标")])],2)])])],1)],1)])])],1),t._v(" "),a("div",{staticClass:"form"},[a("el-form",{ref:"chartForm",attrs:{"label-width":"180px",model:t.params,rules:t.rules,inline:!0}},[a("el-form-item",{attrs:{label:"二级机构",prop:"secondOrg"}},[a("el-select",{attrs:{placeholder:"请选择二级机构"},on:{change:t.getThridOrg},model:{value:t.params.secondOrg,callback:function(e){t.$set(t.params,"secondOrg",e)},expression:"params.secondOrg"}},t._l(t.formData.orgList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.name}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"三级机构",prop:"thirdOrg"}},[a("el-select",{attrs:{placeholder:"请选择三级机构"},model:{value:t.params.thirdOrg,callback:function(e){t.$set(t.params,"thirdOrg",e)},expression:"params.thirdOrg"}},t._l(t.thirdOrgList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.name}})}))],1),t._v(" "),t._l(t.currentDimList,function(e){return a("el-form-item",{key:e.code,attrs:{label:e.name,prop:e.name}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params[e.code],callback:function(a){t.$set(t.params,e.code,a)},expression:"params[dim.code]"}},t._l(e.detail,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.name}})}))],1)})],2)],1),t._v(" "),a("div",{staticClass:"option"},[a("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:function(e){t.chartShow=!0}}},[t._v("图表展示")])],1),t._v(" "),a("div",{staticClass:"data"},[a("div",{staticClass:"table"},[a("base-table",{attrs:{columns:t.columns,data:t.tableData},on:{detail:t.detail}})],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择指标",visible:t.indexShow,width:"30%"},on:{"update:visible":function(e){t.indexShow=e}}},t._l(t.formData.indexList,function(e){return a("el-tag",{key:e.code,attrs:{type:t.currentIndexCode.includes(e.code)?"primary":"info"},nativeOn:{click:function(a){t.addIndex(e.code)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),t._v(" "),a("el-dialog",{attrs:{title:"数据钻取",visible:t.detailShow,width:"60%"},on:{"update:visible":function(e){t.detailShow=e}}},[a("base-table",{attrs:{columns:t.diaColumns,data:t.detailData}})],1),t._v(" "),a("el-dialog",{attrs:{title:"图表展示",visible:t.chartShow,width:"60%"},on:{"update:visible":function(e){t.chartShow=e}}},[a("el-collapse",{attrs:{accordion:""},model:{value:t.activeChartName,callback:function(e){t.activeChartName=e},expression:"activeChartName"}},[a("el-collapse-item",{attrs:{title:t.params.scene,name:"select"}},[a("div",{staticClass:"sector-list"},[a("div",{staticClass:"title"},[t._v("选择维度")]),t._v(" "),a("div",{staticClass:"biz-sector"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{"label-width":"120px",inline:!0}},[a("el-form-item",[a("el-checkbox-group",{attrs:{max:1},on:{change:t.chartDimChange},model:{value:t.chartDimList,callback:function(e){t.chartDimList=e},expression:"chartDimList"}},t._l(t.currentDimList,function(e){return a("el-checkbox",{key:e.code,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],1)],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"sector-list"},[a("div",{staticClass:"title"},[t._v("选择指标")]),t._v(" "),a("div",{staticClass:"biz-sector"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{"label-width":"120px",inline:!0}},[a("el-form-item",[a("el-checkbox-group",{on:{change:t.chartIndexChange},model:{value:t.chartIndexList,callback:function(e){t.chartIndexList=e},expression:"chartIndexList"}},t._l(t.currentIndexList,function(e){return a("el-checkbox",{key:e.code,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],1)],1)],1)],1)],1)])])],1),t._v(" "),a("div",{staticClass:"data"},[a("el-row",{attrs:{gutter:20}},t._l(t.tempList,function(e){return a("el-col",{key:e.id,staticClass:"chart",attrs:{span:8}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("div",{staticStyle:{padding:"14px"}},[a("div",{staticClass:" clearfix"},[a("el-button",{staticClass:"option",attrs:{type:"text",icon:"iconfont icon-cc-chart",name:"zhuzhuang"},on:{click:function(a){t.drawLine(e.id,e.options[0].option)}}}),t._v(" "),a("el-button",{staticClass:"option",attrs:{type:"text",icon:"iconfont icon-chart-line"},on:{click:function(a){t.drawLine(e.id,e.options[1].option)}}}),t._v(" "),a("el-button",{staticClass:"option",attrs:{type:"text",icon:"iconfont icon-chartarea"},on:{click:function(a){t.drawLine(e.id,e.options[2].option)}}}),t._v(" "),a("el-button",{staticClass:"option",attrs:{type:"text",icon:"iconfont icon-chart"},on:{click:function(a){t.drawLine(e.id,e.options[3].option)}}}),t._v(" "),a("el-button",{staticClass:"option",attrs:{type:"text",icon:"iconfont icon-chart1"},on:{click:function(a){t.drawLine(e.id,e.options[4].option)}}}),t._v(" "),a("el-button",{staticClass:"option",attrs:{type:"text",icon:"iconfont icon-dotchart"},on:{click:function(a){t.drawLine(e.id,e.options[5].option)}}}),t._v(" "),a("el-button",{staticClass:"option",attrs:{type:"text",icon:"iconfont icon-radarchart"},on:{click:function(a){t.drawLine(e.id,e.options[6].option)}}})],1)]),t._v(" "),a("div",{staticClass:"image",attrs:{id:e.id}})])],1)}))],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(t){a("BTrg")},"data-v-e600962a",null);e.default=l.exports}});