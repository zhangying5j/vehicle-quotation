webpackJsonp([35],{"+71F":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),n=i.n(a),r=i("NYxO"),s=i("Z4dx"),o={name:"CustomDimension",components:{BackButton:function(){return i.e(90).then(i.bind(null,"uOVF"))},BizSectorList:function(){return i.e(92).then(i.bind(null,"jpoa"))},TagDimension:function(){return i.e(108).then(i.bind(null,"RXyt"))},RangeDimension:function(){return i.e(105).then(i.bind(null,"t+1g"))},BaseTable:function(){return i.e(89).then(i.bind(null,"ss0d"))}},data:function(){return{baseRecommend:[],currentSector:0,dimensionList:[],currentCustomDimension:[],currentDimensionDetail:[],currentDimension:"",dimensionColumns:[{prop:"no",title:"序号",width:50,align:"center"},{prop:"tag",title:"标签",width:200,align:"center"},{prop:"range",title:"标签范围",width:128,align:"center"},{prop:"a",title:"满期赔付率（%）",width:140,align:"center"},{prop:"b",title:"合并终极赔付率（%）",width:160,align:"center"},{prop:"c",title:"保费占比（%）",width:120,align:"center"}],currentDimensionData:[{id:"comLastCount",type:"tag",title:"商业险上年出险次数",tags:[{code:"noCom",name:"未投保商业险"},{code:"newCar",name:"新车"},{code:"newIns",name:"新保"},{code:"no3",name:"连续3年+未出险"},{code:"no2",name:"连续2年未出险"},{code:"no1",name:"上年未出险"},{code:"1",name:"1次"},{code:"2",name:"2次"},{code:"3",name:"3次"},{code:"4",name:"4次"},{code:"5",name:"5次+"}],split:[{id:"1",title:"未投保商业险",tags:["noCom"]},{id:"2",title:"0次",tags:["newCar","newIns","no3","no2","no1"]},{id:"3",title:"1次",tags:["1"]},{id:"4",title:"2次",tags:["2"]},{id:"5",title:"3次及以上",tags:["3","4","5"]}]},{id:"age",type:"range",title:"年龄",list:[{id:"1",isEdit:!1,title:"20以下",start:"0",end:"20"},{id:"2",isEdit:!1,title:"20-30",start:"20",end:"30"},{id:"3",isEdit:!1,title:"30-45",start:"30",end:"45"},{id:"4",isEdit:!1,title:"45-60",start:"45",end:"60"},{id:"5",isEdit:!1,title:"60以上",start:"60",end:"N"}]},{id:"rci",type:"range",title:"商业险上年出险金额",list:[{id:"1",isEdit:!1,title:"1000以下",start:"0",end:"1000"},{id:"2",isEdit:!1,title:"1000-2000",start:"1000",end:"2000"},{id:"3",isEdit:!1,title:"2000-5000",start:"2000",end:"5000"},{id:"4",isEdit:!1,title:"5000-10000",start:"5000",end:"10000"},{id:"5",isEdit:!1,title:"10000以上",start:"10000",end:"N"}]}],dialogTableVisible:!1,dimensionDialogVisible:!1,rangeShow:"",dimComVisible:!1,dimComCol:[{prop:"carPrice",width:120,label:"新车购置价"},{prop:"usage",width:120,label:"使用性质"},{prop:"age",width:120,label:"年龄"},{prop:"insCom",width:120,label:"投保组合"}],dimComData:[{carPrice:"0-10万",usage:"家庭自用",age:"20-30",insCom:"单商_单三_无附加"},{carPrice:"0-10万",usage:"家庭自用",age:"20-30",insCom:"交商_交三_无附加"},{carPrice:"0-10万",usage:"家庭自用",age:"30-45",insCom:"单商_单三_无附加"},{carPrice:"0-10万",usage:"家庭自用",age:"30-45",insCom:"交商_交三_无附加"},{carPrice:"0-10万",usage:"营业出租租赁",age:"20-30",insCom:"单商_单三_无附加"},{carPrice:"0-10万",usage:"营业出租租赁",age:"20-30",insCom:"交商_交三_无附加"},{carPrice:"0-10万",usage:"营业出租租赁",age:"30-45",insCom:"单商_单三_无附加"},{carPrice:"0-10万",usage:"营业出租租赁",age:"30-45",insCom:"交商_交三_无附加"},{carPrice:"10-25万",usage:"家庭自用",age:"20-30",insCom:"单商_单三_无附加"},{carPrice:"10-25万",usage:"家庭自用",age:"20-30",insCom:"交商_交三_无附加"},{carPrice:"10-25万",usage:"家庭自用",age:"30-45",insCom:"单商_单三_无附加"},{carPrice:"10-25万",usage:"家庭自用",age:"30-45",insCom:"交商_交三_无附加"},{carPrice:"10-25万",usage:"营业出租租赁",age:"20-30",insCom:"单商_单三_无附加"},{carPrice:"10-25万",usage:"营业出租租赁",age:"20-30",insCom:"交商_交三_无附加"},{carPrice:"10-25万",usage:"营业出租租赁",age:"30-45",insCom:"单商_单三_无附加"},{carPrice:"10-25万",usage:"营业出租租赁",age:"30-45",insCom:"交商_交三_无附加"}],chartVisible:!1}},created:function(){var t=this;Object(s.a)(this.param).then(function(e){t.baseRecommend=e.data;var i=e.data.map(function(t){return{id:t.id,name:t.name}});t.$store.commit("SET_SECTORS",i),t.loadDimension(),t.currentDimension=e.data[0].dimensionList[0].code,t.currentDimensionDetail=e.data[0].dimensionList[0].detail,t.rangeShow=e.data[0].dimensionList[0].rangeShow})},computed:n()({},Object(r.c)({sectors:function(t){return t.individual.sectors},param:function(t){return t.individual.param},tableHeader:function(t){return t.app.tableHeader}}),{customerDimensionList:function(){var t=this;return this.currentCustomDimension.map(function(e){return t.dimensionList.find(function(t){return t.code===e})})},leftDimensionList:function(){var t=this;return this.dimensionList.filter(function(e){return!t.currentCustomDimension.includes(e.code)})},boxData:function(){return console.log(this.$echarts.dataTool),console.log(this.$echarts.dataTool.prepareBoxplotData([])),this.$echarts.dataTool.prepareBoxplotData([[35.91,36.29,37.12,38.54,38.61,39.89,41.23,42.56],[35.24,36.56,37.01,38.49,38.51,40.96,43.99,45.32],[36.51,37.04,38.05,39.04,39.06,42.88,45.06,48.05],[35.05,37.78,39.46,40.12,40.14,41.56,42.57,43.25],[36.88,37.01,39.06,40.21,40.23,46.65,48.96,49.28],[37.88,38.65,39.88,40.23,40.25,45.95,48.95,49.87],[36.59,38.66,39.26,40.39,40.41,42.25,45.08,46.29]])}}),methods:{loadDimension:function(){this.dimensionList=this.baseRecommend[this.currentSector].dimensionList.map(function(t){return{code:t.code,name:t.name}}),this.currentCustomDimension=this.baseRecommend[this.currentSector].recommendDimension},getClassBySector:function(t){this.currentSector=this.sectors.findIndex(function(e){return e.id===t}),this.loadDimension();var e=this.baseRecommend[this.currentSector].dimensionList[0];this.currentDimension=e.code,this.currentDimensionDetail=e.detail,this.rangeShow=e.rangeShow},getDimComBySector:function(t){},addDimension:function(t){this.currentCustomDimension.includes(t)||(this.currentCustomDimension.push(t),"forceLastPay"===t&&this.currentDimensionData.push({id:"forceLastPay",type:"range",title:"交强险上年出险金额",list:[]}))},removeDimension:function(t){var e=this.currentDimensionData.findIndex(function(e){return e.id===t});this.currentDimensionData.splice(e,1),this.currentCustomDimension.splice(this.currentCustomDimension.indexOf(t),1)},dimensionDetail:function(t){this.currentDimension=t;var e=this.baseRecommend[this.currentSector].dimensionList.find(function(e){return e.code===t});this.rangeShow=e.rangeShow,this.currentDimensionDetail=e.detail},confirm:function(){this.$router.push({path:"/admin/individual/declare/confirm"})},drawLine:function(t,e){this.$echarts.init(document.getElementById(t),"light").setOption(e)},showChartList:function(){var t=this;this.chartVisible=!0;var e=["0年","1年","2年","3年","4年","5年","6年+"];this.$nextTick(function(){var i={title:{text:"赔付率分布"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["保单数量","赔付率"]},xAxis:[{name:"车龄",type:"category",data:e,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"保单数量",min:0,max:11e3,interval:1e3,axisLabel:{formatter:"{value}"}},{type:"value",name:"赔付率",min:38,max:41,interval:.5,axisLabel:{formatter:"{value} %"}}],series:[{name:"保单数量",type:"bar",data:[10298,6476,4857,6466,3832,2874,8250]},{name:"赔付率",type:"line",yAxisIndex:1,data:[38.54,38.49,39.04,40.12,40.21,40.23,40.39]}]};t.drawLine("myChart1",i);var a={title:{text:"保费分析"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["本年","上年同期","本季度","上季度同期","本月","上月同期"],selected:{"本季度":!1,"上季度同期":!1,"本月":!1,"上月同期":!1}},xAxis:[{name:"车龄",type:"category",data:e,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"保费收入",min:0,max:4700,interval:200,axisLabel:{formatter:"{value}"}},{type:"value",name:"保费占比",min:7,max:25,interval:1,axisLabel:{formatter:"{value} %"}}],series:[{name:"本年",type:"bar",data:[4371.3,2914.2,2428.5,2586.6,1724.4,1437,4538]},{name:"上年同期",type:"bar",data:[4355.3,2902.2,2404.5,2574.6,1702.4,1424,4519]},{name:"本季度",type:"bar",data:[1092.83,728.55,607.13,646.65,431.1,359.25,1134.5]},{name:"上季度同期",type:"bar",data:[1087.83,716.26,596.12,637.58,420.8,348.14,1123.9]},{name:"本月",type:"bar",data:[364.28,242.85,202.38,215.55,143.7,119.75,378.17]},{name:"上月同期",type:"bar",data:[353.19,235.75,192.55,209.38,140.6,108.69,369.32]},{name:"保费占比",type:"line",yAxisIndex:1,data:[21.86,14.57,12.14,12.93,8.62,7.19,22.69]}]};t.drawLine("myChart2",a);var n={title:[{text:"赔付率分布"}],tooltip:{trigger:"item",axisPointer:{type:"shadow"}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{name:"车龄",type:"category",data:["0年","1年","2年","3年","4年","5年","6年+"],axisPointer:{type:"shadow"}},yAxis:{type:"value",name:"赔付率",min:30,max:60,interval:5,splitArea:{show:!0}},series:[{name:"boxplot",type:"boxplot",data:t.boxData.boxData,tooltip:{formatter:function(t){return["车龄 "+t.name+": ","upper: "+t.data[5],"Q3: "+t.data[4],"median: "+t.data[3],"Q1: "+t.data[2],"lower: "+t.data[1]].join("<br/>")}}}]};t.drawLine("myChart3",n);var r={title:{text:"保单成本分析"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["赔付率","市场费用率","非市场费用率","优惠比率"]},xAxis:[{name:"车龄",type:"category",data:e,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"",min:0,max:100,interval:5,axisLabel:{formatter:"{value}"}}],series:[{name:"赔付率",type:"bar",stack:"合计比率",data:[38.54,38.49,39.04,40.12,40.21,40.23,40.39]},{name:"市场费用率",type:"bar",stack:"合计比率",data:[25.54,24.49,22.04,23.12,21.21,20.23,22.39]},{name:"非市场费用率",type:"bar",stack:"合计比率",data:[30.54,30.49,31.04,31.12,32.21,33.23,32.39]},{name:"优惠比率",type:"bar",stack:"合计比率",data:[1.23,1.32,.95,.88,.97,.96,.75]}]};t.drawLine("myChart4",r);var s={title:{text:"保单数量分布"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["低I","低II","低III","中I","中II","中III","高I","高II","高III"]},xAxis:[{name:"车龄",type:"category",data:e,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"",min:0,max:6e3,interval:300,axisLabel:{formatter:"{value}"}}],series:[{name:"低I",type:"bar",stack:"保单数量",data:[532,435,420,385,375,365,510]},{name:"低II",type:"bar",stack:"保单数量",data:[523,453,402,358,357,356,501]},{name:"低III",type:"bar",stack:"保单数量",data:[632,535,520,485,475,465,610]},{name:"中I",type:"bar",stack:"保单数量",data:[532,435,420,385,375,365,510]},{name:"中II",type:"bar",stack:"保单数量",data:[523,453,402,358,357,356,501]},{name:"中III",type:"bar",stack:"保单数量",data:[632,535,520,485,475,465,610]},{name:"高I",type:"bar",stack:"保单数量",data:[532,435,420,385,375,365,510]},{name:"高II",type:"bar",stack:"保单数量",data:[523,453,402,358,357,356,501]},{name:"高III",type:"bar",stack:"保单数量",data:[632,535,520,485,475,465,610]}]};t.drawLine("myChart5",s);var o={title:{text:"保单综合分析"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["保单数量","赔付率","市场费用率"]},xAxis:[{name:"车龄",type:"category",data:e,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"保费收入( 万元)",position:"left",min:1400,max:4600,interval:500,axisLabel:{formatter:"{value}"}},{type:"value",name:"赔付率",position:"right",min:38,max:41,interval:.5,axisLabel:{formatter:"{value} %"}},{type:"value",name:"市场费用率",position:"right",offset:10,min:20,max:27,interval:.5,axisLabel:{formatter:"{value} %"}}],series:[{name:"保费收入",type:"bar",data:[4371.3,2914.2,2428.5,2586.6,1724.4,1437,4538]},{name:"赔付率",type:"line",yAxisIndex:1,data:[38.54,38.49,39.04,40.12,40.21,40.23,40.39]},{name:"市场费用率",type:"line",yAxisIndex:2,data:[25.54,24.49,22.04,23.12,21.21,20.23,22.39]}]};t.drawLine("myChart6",o)})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-content"},[i("biz-sector-list",{attrs:{title:"选择业务板块",sectors:t.sectors},on:{sectorClick:t.getClassBySector}}),t._v(" "),i("div",{attrs:{id:"custom_latitude"}},[i("div",{staticClass:"tableSector"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content bg-purple-light"},[i("div",{staticClass:"tag"},[t._l(t.customerDimensionList,function(e){return i("el-tag",{key:e.code,attrs:{closable:"",type:t.currentDimension===e.code?"primary":"info"},on:{close:function(i){t.removeDimension(e.code)}},nativeOn:{click:function(i){t.dimensionDetail(e.code)}}},[t._v("\n                "+t._s(e.name)+"\n              ")])}),t._v(" "),i("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-plus"},on:{click:function(e){t.dimensionDialogVisible=!0}}},[t._v("新增维度")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"text",icon:"iconfont icon-bianji",size:"small"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("编辑")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"text",icon:"el-icon-view",size:"small"},on:{click:t.showChartList}},[t._v("图表")])],2),t._v(" "),i("el-table",{attrs:{data:t.currentDimensionDetail,stripe:"","header-cell-style":t.tableHeader,height:"400px"}},[i("el-table-column",{attrs:{"header-align":"center",prop:"no",label:"序号","min-width":"50",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{"header-align":"center",prop:"tag",label:"标签","min-width":"200",align:"center"}}),t._v(" "),t.rangeShow?i("el-table-column",{attrs:{"header-align":"center",prop:"range",label:"标签范围","min-width":"250",align:"center"}}):t._e(),t._v(" "),t.rangeShow?t._e():i("el-table-column",{attrs:{"header-align":"center",prop:"down",label:"从()","min-width":"125",align:"center"}}),t._v(" "),t.rangeShow?t._e():i("el-table-column",{attrs:{"header-align":"center",prop:"up",label:"至(不含)","min-width":"125",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{"header-align":"center",prop:"a",label:"满期赔付率（%）","min-width":"140",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{"header-align":"center",prop:"b",label:"合并终极赔付率（%）","min-width":"160",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{"header-align":"center",prop:"c",label:"保费占比（%）","min-width":"120",align:"center"}})],1)],1)])],1)],1)]),t._v(" "),i("div",{staticClass:"option"},[i("back-button",[t._v("上一步")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){t.dimComVisible=!0}}},[t._v("查看全部维度组合")]),t._v(" "),i("back-button",{attrs:{type:"next"},on:{next:t.confirm}},[t._v("下一步")])],1),t._v(" "),i("el-dialog",{attrs:{title:"编辑维度",fullscreen:"",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[t._l(t.currentDimensionData,function(e){return["tag"===e.type?i("tag-dimension",{key:e.id,attrs:{data:e}}):t._e(),t._v(" "),"range"===e.type?i("range-dimension",{key:e.id,attrs:{data:e}}):t._e()]}),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("保存维度")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("关闭")])],1)],2),t._v(" "),i("el-dialog",{attrs:{title:"添加维度",visible:t.dimensionDialogVisible,width:"30%"},on:{"update:visible":function(e){t.dimensionDialogVisible=e}}},t._l(t.dimensionList,function(e){return i("el-tag",{key:e.code,attrs:{type:t.currentCustomDimension.includes(e.code)?"primary":"info"},nativeOn:{click:function(i){t.addDimension(e.code)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),t._v(" "),i("el-dialog",{attrs:{title:"查看全部维度组合",fullscreen:"",visible:t.dimComVisible},on:{"update:visible":function(e){t.dimComVisible=e}}},[i("span",[t._v("机构:北京分公司"+t._s(this.param.orgcd))]),t._v(" "),i("span",[t._v("渠道:传统渠道"+t._s(this.param.channelcd))]),t._v(" "),i("biz-sector-list",{attrs:{title:"选择业务板块",sectors:t.sectors},on:{sectorClick:t.getDimComBySector}}),t._v(" "),i("base-table",{attrs:{columns:t.dimComCol,data:t.dimComData}})],1),t._v(" "),i("el-dialog",{attrs:{title:"图表展示",fullscreen:"",visible:t.chartVisible},on:{"update:visible":function(e){t.chartVisible=e}}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart1"}})]),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart2"}})]),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart3"}})])],1),t._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart4"}})]),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart5"}})]),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart6"}})])],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(o,l,!1,function(t){i("/DAp")},"data-v-665991d4",null);e.default=c.exports},"/DAp":function(t,e){}});