webpackJsonp([4],{StrY:function(e,t,s){e.exports=s.p+"static/img/login_img.4f3a9ea.jpg"},"T+/8":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"Login",data:function(){return{isReload:!1,user:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]}}},created:function(){if(this.$store.getters.menus.length>0)return window.location.reload();console.log(this.$store.getters.menus.length),this.isReload=!0},methods:{login:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$store.dispatch("Login",t.user).then(function(e){e.result?t.$router.push({path:"/index"}):t.$message.error("用户名或密码错误")}).catch(function(e){console.log("登录出错",e)})})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isReload?s("div",{staticClass:"container",attrs:{id:"loginBg"}},[s("div",{staticClass:"login"},[e._m(0),e._v(" "),s("div",{staticClass:"right"},[e._m(1),e._v(" "),s("el-form",{ref:"loginForm",attrs:{model:e.user,rules:e.rules}},[s("el-form-item",{attrs:{prop:"username"}},[s("div",{staticClass:"m-md-t"},[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"iconfont icon-user"})])],2)],1)]),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("div",{staticClass:"m-md-t"},[s("el-input",{attrs:{placeholder:"密码",type:"password"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.login("loginForm")}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"iconfont icon-password"})])],2)],1)]),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.login("loginForm")}}},[e._v("登录")])],1)],1)],1)])]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("img",{attrs:{src:s("StrY"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("登录 "),t("em",[this._v("Login")])])}]};var i=s("VU/8")(r,n,!1,function(e){s("rwf0")},"data-v-6ffcaa58",null);t.default=i.exports},rwf0:function(e,t){}});